(function(factory){if(typeof define==="function"&&define.amd)define(["jquery","codemirror"],factory);else factory(window.jQuery,window.CodeMirror)})(function($,CodeMirror){if("function"!==typeof Array.prototype.reduce)Array.prototype.reduce=function(callback,optInitialValue){var idx;var value;var length=this.length>>>0;var isValueSet=false;if(1<arguments.length){value=optInitialValue;isValueSet=true}for(idx=0;length>idx;++idx)if(this.hasOwnProperty(idx))if(isValueSet)value=callback(value,this[idx],
idx,this);else{value=this[idx];isValueSet=true}if(!isValueSet)throw new TypeError("Reduce of empty array with no initial value");return value};var agent={bMac:navigator.appVersion.indexOf("Mac")>-1,bMSIE:navigator.userAgent.indexOf("MSIE")>-1,bFF:navigator.userAgent.indexOf("Firefox")>-1,bCodeMirror:!!CodeMirror};var func=function(){var eq=function(elA){return function(elB){return elA===elB}};var eq2=function(elA,elB){return elA===elB};var fail=function(){return false};var not=function(f){return function(){return!f.apply(f,
arguments)}};var self=function(a){return a};return{eq:eq,eq2:eq2,fail:fail,not:not,self:self}}();var list=function(){var head=function(array){return array[0]};var last=function(array){return array[array.length-1]};var initial=function(array){return array.slice(0,array.length-1)};var tail=function(array){return array.slice(1)};var sum=function(array,fn){fn=fn||func.self;return array.reduce(function(memo,v){return memo+fn(v)},0)};var from=function(collection){var result=[];var idx=-1;for(var length=
collection.length;++idx<length;)result[idx]=collection[idx];return result};var clusterBy=function(array,fn){if(array.length===0)return[];var aTail=tail(array);return aTail.reduce(function(memo,v){var aLast=last(memo);if(fn(last(aLast),v))aLast[aLast.length]=v;else memo[memo.length]=[v];return memo},[[head(array)]])};var compact=function(array){var aResult=[];var idx=0;for(var sz=array.length;idx<sz;idx++)if(array[idx])aResult.push(array[idx]);return aResult};return{head:head,last:last,initial:initial,
tail:tail,sum:sum,from:from,compact:compact,clusterBy:clusterBy}}();var dom=function(){var makePredByNodeName=function(sNodeName){return function(node){return node&&node.nodeName===sNodeName}};var isPara=function(node){return node&&/^DIV|^P|^LI|^H[1-7]/.test(node.nodeName)};var emptyPara="\x3cp\x3e\x3cbr/\x3e\x3c/p\x3e";var isList=function(node){return node&&/^UL|^OL/.test(node.nodeName)};var isEditable=function(node){return node&&$(node).hasClass("note-editable")};var isControlSizing=function(node){return node&&
$(node).hasClass("note-control-sizing")};var ancestor=function(node,pred){for(;node;){if(pred(node))return node;node=node.parentNode}return null};var listAncestor=function(node,pred){pred=pred||func.fail;var aAncestor=[];ancestor(node,function(el){aAncestor.push(el);return pred(el)});return aAncestor};var commonAncestor=function(nodeA,nodeB){var aAncestor=listAncestor(nodeA);for(var n=nodeB;n;n=n.parentNode)if($.inArray(n,aAncestor)>-1)return n;return null};var listBetween=function(nodeA,nodeB){var aNode=
[];var bStart=false;var bEnd=false;var fnWalk=function(node){if(!node)return;if(node===nodeA)bStart=true;if(bStart&&!bEnd)aNode.push(node);if(node===nodeB){bEnd=true;return}var idx=0;for(var sz=node.childNodes.length;idx<sz;idx++)fnWalk(node.childNodes[idx])};fnWalk(commonAncestor(nodeA,nodeB));return aNode};var listPrev=function(node,pred){pred=pred||func.fail;for(var aNext=[];node;){aNext.push(node);if(pred(node))break;node=node.previousSibling}return aNext};var listNext=function(node,pred){pred=
pred||func.fail;for(var aNext=[];node;){aNext.push(node);if(pred(node))break;node=node.nextSibling}return aNext};var insertAfter=function(node,preceding){var next=preceding.nextSibling;var parent=preceding.parentNode;if(next)parent.insertBefore(node,next);else parent.appendChild(node);return node};var appends=function(node,aChild){$.each(aChild,function(idx,child){node.appendChild(child)});return node};var isText=makePredByNodeName("#text");var length=function(node){if(isText(node))return node.nodeValue.length;
return node.childNodes.length};var position=function(node){for(var offset=0;node=node.previousSibling;)offset+=1;return offset};var makeOffsetPath=function(ancestor,node){var aAncestor=list.initial(listAncestor(node,func.eq(ancestor)));return $.map(aAncestor,position).reverse()};var fromOffsetPath=function(ancestor,aOffset){var current=ancestor;var i=0;for(var sz=aOffset.length;i<sz;i++)current=current.childNodes[aOffset[i]];return current};var splitData=function(node,offset){if(offset===0)return node;
if(offset>=length(node))return node.nextSibling;if(isText(node))return node.splitText(offset);var child=node.childNodes[offset];node=insertAfter(node.cloneNode(false),node);return appends(node,listNext(child))};var split=function(root,pivot,offset){var aAncestor=listAncestor(pivot,func.eq(root));if(aAncestor.length===1)return splitData(pivot,offset);return aAncestor.reduce(function(node,parent){var clone=parent.cloneNode(false);insertAfter(clone,parent);if(node===pivot)node=splitData(node,offset);
appends(clone,listNext(node));return clone})};var remove=function(node,bRemoveChild){if(!node||!node.parentNode)return;if(node.removeNode)return node.removeNode(bRemoveChild);var elParent=node.parentNode;if(!bRemoveChild){var aNode=[];var i;var sz;for(i=0,sz=node.childNodes.length;i<sz;i++)aNode.push(node.childNodes[i]);for(i=0,sz=aNode.length;i<sz;i++)elParent.insertBefore(aNode[i],node)}elParent.removeChild(node)};var html=function($node){return dom.isTextarea($node[0])?$node.val():$node.html()};
return{emptyPara:emptyPara,isText:isText,isPara:isPara,isList:isList,isEditable:isEditable,isControlSizing:isControlSizing,isAnchor:makePredByNodeName("A"),isDiv:makePredByNodeName("DIV"),isSpan:makePredByNodeName("SPAN"),isB:makePredByNodeName("B"),isU:makePredByNodeName("U"),isS:makePredByNodeName("S"),isI:makePredByNodeName("I"),isImg:makePredByNodeName("IMG"),isTextarea:makePredByNodeName("TEXTAREA"),ancestor:ancestor,listAncestor:listAncestor,listNext:listNext,listPrev:listPrev,commonAncestor:commonAncestor,
listBetween:listBetween,insertAfter:insertAfter,position:position,makeOffsetPath:makeOffsetPath,fromOffsetPath:fromOffsetPath,split:split,remove:remove,html:html}}();var range=function(){var bW3CRangeSupport=!!document.createRange;var textRange2bp=function(textRange,bStart){var elCont=textRange.parentElement();var nOffset;var tester=document.body.createTextRange();var elPrevCont;var aChild=list.from(elCont.childNodes);for(nOffset=0;nOffset<aChild.length;nOffset++){if(dom.isText(aChild[nOffset]))continue;
tester.moveToElementText(aChild[nOffset]);if(tester.compareEndPoints("StartToStart",textRange)>=0)break;elPrevCont=aChild[nOffset]}if(nOffset!==0&&dom.isText(aChild[nOffset-1])){var textRangeStart=document.body.createTextRange();var elCurText=null;textRangeStart.moveToElementText(elPrevCont||elCont);textRangeStart.collapse(!elPrevCont);elCurText=elPrevCont?elPrevCont.nextSibling:elCont.firstChild;var pointTester=textRange.duplicate();pointTester.setEndPoint("StartToStart",textRangeStart);for(var nTextCount=
pointTester.text.replace(/[\r\n]/g,"").length;nTextCount>elCurText.nodeValue.length&&elCurText.nextSibling;){nTextCount-=elCurText.nodeValue.length;elCurText=elCurText.nextSibling}var sDummy=elCurText.nodeValue;if(bStart&&elCurText.nextSibling&&dom.isText(elCurText.nextSibling)&&nTextCount===elCurText.nodeValue.length){nTextCount-=elCurText.nodeValue.length;elCurText=elCurText.nextSibling}elCont=elCurText;nOffset=nTextCount}return{cont:elCont,offset:nOffset}};var bp2textRange=function(bp){var textRangeInfo=
function(elCont,nOffset){var elNode;var bCollapseToStart;if(dom.isText(elCont)){var aPrevText=dom.listPrev(elCont,func.not(dom.isText));var elPrevCont=list.last(aPrevText).previousSibling;elNode=elPrevCont||elCont.parentNode;nOffset+=list.sum(list.tail(aPrevText),dom.length);bCollapseToStart=!elPrevCont}else{elNode=elCont.childNodes[nOffset]||elCont;if(dom.isText(elNode))return textRangeInfo(elNode,nOffset);nOffset=0;bCollapseToStart=false}return{cont:elNode,collapseToStart:bCollapseToStart,offset:nOffset}};
var textRange=document.body.createTextRange();var info=textRangeInfo(bp.cont,bp.offset);textRange.moveToElementText(info.cont);textRange.collapse(info.collapseToStart);textRange.moveStart("character",info.offset);return textRange};var WrappedRange=function(sc,so,ec,eo){this.sc=sc;this.so=so;this.ec=ec;this.eo=eo;var nativeRange=function(){if(bW3CRangeSupport){var w3cRange=document.createRange();w3cRange.setStart(sc,so);w3cRange.setEnd(ec,eo);return w3cRange}else{var textRange=bp2textRange({cont:sc,
offset:so});textRange.setEndPoint("EndToEnd",bp2textRange({cont:ec,offset:eo}));return textRange}};this.select=function(){var nativeRng=nativeRange();if(bW3CRangeSupport){var selection=document.getSelection();if(selection.rangeCount>0)selection.removeAllRanges();selection.addRange(nativeRng)}else nativeRng.select()};this.listPara=function(){var aNode=dom.listBetween(sc,ec);var aPara=list.compact($.map(aNode,function(node){return dom.ancestor(node,dom.isPara)}));return $.map(list.clusterBy(aPara,func.eq2),
list.head)};var makeIsOn=function(pred){return function(){var elAncestor=dom.ancestor(sc,pred);return elAncestor&&elAncestor===dom.ancestor(ec,pred)}};this.isOnEditable=makeIsOn(dom.isEditable);this.isOnList=makeIsOn(dom.isList);this.isOnAnchor=makeIsOn(dom.isAnchor);this.isCollapsed=function(){return sc===ec&&so===eo};this.insertNode=function(node){var nativeRng=nativeRange();if(bW3CRangeSupport)nativeRng.insertNode(node);else nativeRng.pasteHTML(node.outerHTML)};this.toString=function(){var nativeRng=
nativeRange();return bW3CRangeSupport?nativeRng.toString():nativeRng.text};this.bookmark=function(elEditable){return{s:{path:dom.makeOffsetPath(elEditable,sc),offset:so},e:{path:dom.makeOffsetPath(elEditable,ec),offset:eo}}}};return{create:function(sc,so,ec,eo){if(arguments.length===0)if(bW3CRangeSupport){var selection=document.getSelection();if(selection.rangeCount===0)return null;var nativeRng=selection.getRangeAt(0);sc=nativeRng.startContainer;so=nativeRng.startOffset;ec=nativeRng.endContainer;
eo=nativeRng.endOffset}else{var textRange=document.selection.createRange();var textRangeEnd=textRange.duplicate();textRangeEnd.collapse(false);var textRangeStart=textRange;textRangeStart.collapse(true);var bpStart=textRange2bp(textRangeStart,true);var bpEnd=textRange2bp(textRangeEnd,false);sc=bpStart.cont;so=bpStart.offset;ec=bpEnd.cont;eo=bpEnd.offset}else if(arguments.length===2){ec=sc;eo=so}return new WrappedRange(sc,so,ec,eo)},createFromBookmark:function(elEditable,bookmark){var sc=dom.fromOffsetPath(elEditable,
bookmark.s.path);var so=bookmark.s.offset;var ec=dom.fromOffsetPath(elEditable,bookmark.e.path);var eo=bookmark.e.offset;return new WrappedRange(sc,so,ec,eo)}}}();var async=function(){var readFile=function(file){return $.Deferred(function(deferred){var reader=new FileReader;reader.onload=function(e){deferred.resolve(e.target.result)};reader.onerror=function(){deferred.reject(this)};reader.readAsDataURL(file)}).promise()};var loadImage=function(sUrl){return $.Deferred(function(deferred){function loaded(){unbindEvents();
deferred.resolve(image)}function errored(){unbindEvents();deferred.reject(image)}function unbindEvents(){image.onload=null;image.onerror=null;image.onabort=null}var image=new Image;image.onload=loaded;image.onerror=errored;image.onabort=errored;image.src=sUrl}).promise()};return{readFile:readFile,loadImage:loadImage}}();var Style=function(){this.stylePara=function(rng,oStyle){var aPara=rng.listPara();$.each(aPara,function(idx,elPara){$.each(oStyle,function(sKey,sValue){elPara.style[sKey]=sValue})})};
this.current=function(rng,elTarget){var $cont=$(dom.isText(rng.sc)?rng.sc.parentNode:rng.sc);var oStyle=$cont.css(["font-size","text-align","list-style-type","line-height"])||{};oStyle["font-size"]=parseInt(oStyle["font-size"]);oStyle["font-bold"]=document.queryCommandState("bold")?"bold":"normal";oStyle["font-italic"]=document.queryCommandState("italic")?"italic":"normal";oStyle["font-underline"]=document.queryCommandState("underline")?"underline":"normal";if(!rng.isOnList())oStyle["list-style"]=
"none";else{var aOrderedType=["circle","disc","disc-leading-zero","square"];var bUnordered=$.inArray(oStyle["list-style-type"],aOrderedType)>-1;oStyle["list-style"]=bUnordered?"unordered":"ordered"}var elPara=dom.ancestor(rng.sc,dom.isPara);if(elPara&&elPara.style["line-height"])oStyle["line-height"]=elPara.style.lineHeight;else{var lineHeight=parseInt(oStyle["line-height"])/parseInt(oStyle["font-size"]);oStyle["line-height"]=lineHeight.toFixed(1)}oStyle.image=dom.isImg(elTarget)&&elTarget;oStyle.anchor=
rng.isOnAnchor()&&dom.ancestor(rng.sc,dom.isAnchor);oStyle.aAncestor=dom.listAncestor(rng.sc,dom.isEditable);return oStyle}};var History=function(){var aUndo=[];var aRedo=[];var makeSnap=function($editable){var elEditable=$editable[0];var rng=range.create();return{contents:$editable.html(),bookmark:rng.bookmark(elEditable),scrollTop:$editable.scrollTop()}};var applySnap=function($editable,oSnap){$editable.html(oSnap.contents).scrollTop(oSnap.scrollTop);range.createFromBookmark($editable[0],oSnap.bookmark).select()};
this.undo=function($editable){var oSnap=makeSnap($editable);if(aUndo.length===0)return;applySnap($editable,aUndo.pop());aRedo.push(oSnap)};this.redo=function($editable){var oSnap=makeSnap($editable);if(aRedo.length===0)return;applySnap($editable,aRedo.pop());aUndo.push(oSnap)};this.recordUndo=function($editable){aRedo=[];aUndo.push(makeSnap($editable))}};var Editor=function(){this.saveRange=function($editable){$editable.data("range",range.create())};this.restoreRange=function($editable){var rng=$editable.data("range");
if(rng)rng.select()};var style=new Style;this.currentStyle=function(elTarget){var rng=range.create();return rng.isOnEditable()&&style.current(rng,elTarget)};this.tab=function($editable){recordUndo($editable);var rng=range.create();var sNbsp=(new Array($editable.data("tabsize")+1)).join("\x26nbsp;");rng.insertNode($('\x3cspan id\x3d"noteTab"\x3e'+sNbsp+"\x3c/span\x3e")[0]);var $tab=$("#noteTab").removeAttr("id");rng=range.create($tab[0],1);rng.select();dom.remove($tab[0])};this.undo=function($editable){$editable.data("NoteHistory").undo($editable)};
this.redo=function($editable){$editable.data("NoteHistory").redo($editable)};var recordUndo=this.recordUndo=function($editable){$editable.data("NoteHistory").recordUndo($editable)};var aCmd=["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule"];var idx=0;for(var len=aCmd.length;idx<len;idx++)this[aCmd[idx]]=function(sCmd){return function($editable,
sValue){recordUndo($editable);document.execCommand(sCmd,false,sValue)}}(aCmd[idx]);this.insertImage=function($editable,sUrl){async.loadImage(sUrl).done(function(image){recordUndo($editable);var $image=$("\x3cimg\x3e").attr("src",sUrl);$image.css("width",Math.min($editable.width(),image.width));range.create().insertNode($image[0])}).fail(function(){var callbacks=$editable.data("callbacks");if(callbacks.onImageUploadError)callbacks.onImageUploadError()})};this.insertVideo=function($editable,sUrl){var ytRegExp=
/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;var ytMatch=sUrl.match(ytRegExp);var igRegExp=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/;var igMatch=sUrl.match(igRegExp);var vRegExp=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/;var vMatch=sUrl.match(vRegExp);var vimRegExp=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/;var vimMatch=sUrl.match(vimRegExp);var dmRegExp=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var dmMatch=sUrl.match(dmRegExp);var $video;if(ytMatch&&
ytMatch[2].length===11){var youtubeId=ytMatch[2];$video=$("\x3ciframe\x3e").attr("src","http://www.youtube.com/embed/"+youtubeId).attr("width","640").attr("height","360")}else if(igMatch&&igMatch[0].length>0)$video=$("\x3ciframe\x3e").attr("src",igMatch[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(vMatch&&vMatch[0].length>0)$video=$("\x3ciframe\x3e").attr("src",vMatch[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class",
"vine-embed");else if(vimMatch&&vimMatch[3].length>0)$video=$("\x3ciframe webkitallowfullscreen mozallowfullscreen allowfullscreen\x3e").attr("src","//player.vimeo.com/video/"+vimMatch[3]).attr("width","640").attr("height","360");else if(dmMatch&&dmMatch[2].length>0)$video=$("\x3ciframe\x3e").attr("src","http://www.dailymotion.com/embed/video/"+dmMatch[2]).attr("width","640").attr("height","360");else;if($video){$video.attr("frameborder",0);range.create().insertNode($video[0])}};this.formatBlock=
function($editable,sValue){recordUndo($editable);sValue=agent.bMSIE?"\x3c"+sValue+"\x3e":sValue;document.execCommand("FormatBlock",false,sValue)};this.fontSize=function($editable,sValue){recordUndo($editable);document.execCommand("fontSize",false,3);if(agent.bFF)$editable.find("font[size\x3d3]").removeAttr("size").css("font-size",sValue+"px");else $editable.find("span").filter(function(){return this.style.fontSize==="medium"}).css("font-size",sValue+"px")};this.lineHeight=function($editable,sValue){recordUndo($editable);
style.stylePara(range.create(),{lineHeight:sValue})};this.unlink=function($editable){var rng=range.create();if(rng.isOnAnchor()){recordUndo($editable);var elAnchor=dom.ancestor(rng.sc,dom.isAnchor);rng=range.create(elAnchor,0,elAnchor,1);rng.select();document.execCommand("unlink")}};this.setLinkDialog=function($editable,fnShowDialog){var rng=range.create();if(rng.isOnAnchor()){var elAnchor=dom.ancestor(rng.sc,dom.isAnchor);rng=range.create(elAnchor,0,elAnchor,1)}fnShowDialog({range:rng,text:rng.toString(),
url:rng.isOnAnchor()?dom.ancestor(rng.sc,dom.isAnchor).href:""},function(sLinkUrl){rng.select();recordUndo($editable);var sLinkUrlWithProtocol;if(sLinkUrl.indexOf("@")!==-1)sLinkUrlWithProtocol=sLinkUrl.indexOf(":")!==-1?sLinkUrl:"mailto:"+sLinkUrl;else sLinkUrlWithProtocol=sLinkUrl.indexOf("://")!==-1?sLinkUrl:"http://"+sLinkUrl;if(agent.bMSIE&&rng.isCollapsed()){rng.insertNode($('\x3cA id\x3d"linkAnchor"\x3e'+sLinkUrl+"\x3c/A\x3e")[0]);var $anchor=$("#linkAnchor").removeAttr("id").attr("href",sLinkUrlWithProtocol);
rng=range.create($anchor[0],0,$anchor[0],1);rng.select()}else document.execCommand("createlink",false,sLinkUrlWithProtocol)})};this.setVideoDialog=function($editable,fnShowDialog){var rng=range.create();var editor=this;if(rng.isOnAnchor()){var elAnchor=dom.ancestor(rng.sc,dom.isAnchor);rng=range.create(elAnchor,0,elAnchor,1)}fnShowDialog({range:rng,text:rng.toString()},function(sLinkUrl){rng.select();recordUndo($editable);editor.insertVideo($editable,sLinkUrl)})};this.color=function($editable,sObjColor){var oColor=
JSON.parse(sObjColor);var foreColor=oColor.foreColor;var backColor=oColor.backColor;recordUndo($editable);if(foreColor)document.execCommand("foreColor",false,foreColor);if(backColor)document.execCommand("backColor",false,backColor)};this.insertTable=function($editable,sDim){recordUndo($editable);var aDim=sDim.split("x");var nCol=aDim[0];var nRow=aDim[1];var aTD=[];var sTD;var sWhitespace=agent.bMSIE?"\x26nbsp;":"\x3cbr/\x3e";for(var idxCol=0;idxCol<nCol;idxCol++)aTD.push("\x3ctd\x3e"+sWhitespace+
"\x3c/td\x3e");sTD=aTD.join("");var aTR=[];var sTR;for(var idxRow=0;idxRow<nRow;idxRow++)aTR.push("\x3ctr\x3e"+sTD+"\x3c/tr\x3e");sTR=aTR.join("");var sTable='\x3ctable class\x3d"table table-bordered"\x3e'+sTR+"\x3c/table\x3e";range.create().insertNode($(sTable)[0])};this.floatMe=function($editable,sValue,elTarget){recordUndo($editable);elTarget.style.cssFloat=sValue};this.resize=function($editable,sValue,elTarget){recordUndo($editable);elTarget.style.width=$editable.width()*sValue+"px";elTarget.style.height=
""};this.resizeTo=function(pos,$target){var newRatio=pos.y/pos.x;var ratio=$target.data("ratio");$target.css({width:ratio>newRatio?pos.x:pos.y/ratio,height:ratio>newRatio?pos.x*ratio:pos.y})}};var Toolbar=function(){this.update=function($toolbar,oStyle){var checkDropdownMenu=function($btn,nValue){$btn.find(".dropdown-menu li a").each(function(){var bChecked=parseFloat($(this).data("value"))===nValue;this.className=bChecked?"checked":""})};var $fontsize=$toolbar.find(".note-fontsize");$fontsize.find(".note-current-fontsize").html(oStyle["font-size"]);
checkDropdownMenu($fontsize,parseFloat(oStyle["font-size"]));var $lineHeight=$toolbar.find(".note-height");checkDropdownMenu($lineHeight,parseFloat(oStyle["line-height"]));var btnState=function(sSelector,pred){var $btn=$toolbar.find(sSelector);$btn[pred()?"addClass":"removeClass"]("active")};btnState('button[data-event\x3d"bold"]',function(){return oStyle["font-bold"]==="bold"});btnState('button[data-event\x3d"italic"]',function(){return oStyle["font-italic"]==="italic"});btnState('button[data-event\x3d"underline"]',
function(){return oStyle["font-underline"]==="underline"});btnState('button[data-event\x3d"justifyLeft"]',function(){return oStyle["text-align"]==="left"||oStyle["text-align"]==="start"});btnState('button[data-event\x3d"justifyCenter"]',function(){return oStyle["text-align"]==="center"});btnState('button[data-event\x3d"justifyRight"]',function(){return oStyle["text-align"]==="right"});btnState('button[data-event\x3d"justifyFull"]',function(){return oStyle["text-align"]==="justify"});btnState('button[data-event\x3d"insertUnorderedList"]',
function(){return oStyle["list-style"]==="unordered"});btnState('button[data-event\x3d"insertOrderedList"]',function(){return oStyle["list-style"]==="ordered"})};this.updateRecentColor=function(elBtn,sEvent,sValue){var $color=$(elBtn).closest(".note-color");var $recentColor=$color.find(".note-recent-color");var oColor=JSON.parse($recentColor.attr("data-value"));oColor[sEvent]=sValue;$recentColor.attr("data-value",JSON.stringify(oColor));var sKey=sEvent==="backColor"?"background-color":"color";$recentColor.find("i").css(sKey,
sValue)};this.updateFullscreen=function($toolbar,bFullscreen){var $btn=$toolbar.find('button[data-event\x3d"fullscreen"]');$btn[bFullscreen?"addClass":"removeClass"]("active")};this.updateCodeview=function($toolbar,bCodeview){var $btn=$toolbar.find('button[data-event\x3d"codeview"]');$btn[bCodeview?"addClass":"removeClass"]("active")};this.enable=function($toolbar){$toolbar.find("button").not('button[data-event\x3d"codeview"]').removeClass("disabled")};this.disable=function($toolbar){$toolbar.find("button").not('button[data-event\x3d"codeview"]').addClass("disabled")}};
var Popover=function(){var showPopover=function($popover,elPlaceholder){var $placeholder=$(elPlaceholder);var pos=$placeholder.position();var height=$placeholder.height();$popover.css({display:"block",left:pos.left,top:pos.top+height})};this.update=function($popover,oStyle){var $linkPopover=$popover.find(".note-link-popover");var $imagePopover=$popover.find(".note-image-popover");if(oStyle.anchor){var $anchor=$linkPopover.find("a");$anchor.attr("href",oStyle.anchor.href).html(oStyle.anchor.href);
showPopover($linkPopover,oStyle.anchor)}else $linkPopover.hide();if(oStyle.image)showPopover($imagePopover,oStyle.image);else $imagePopover.hide()};this.hide=function($popover){$popover.children().hide()}};var Handle=function(){this.update=function($handle,oStyle){var $selection=$handle.find(".note-control-selection");if(oStyle.image){var $image=$(oStyle.image);var pos=$image.position();var szImage={w:$image.width(),h:$image.height()};$selection.css({display:"block",left:pos.left,top:pos.top,width:szImage.w,
height:szImage.h}).data("target",oStyle.image);var sSizing=szImage.w+"x"+szImage.h;$selection.find(".note-control-selection-info").text(sSizing)}else $selection.hide()};this.hide=function($handle){$handle.children().hide()}};var Dialog=function(){var toggleBtn=function($btn,bEnable){if(bEnable)$btn.removeClass("disabled").attr("disabled",false);else $btn.addClass("disabled").attr("disabled",true)};this.showImageDialog=function($dialog,fnInsertImages,fnInsertImage){var $imageDialog=$dialog.find(".note-image-dialog");
var $imageInput=$dialog.find(".note-image-input");var $imageUrl=$dialog.find(".note-image-url");var $imageBtn=$dialog.find(".note-image-btn");$imageDialog.on("shown.bs.modal",function(){$imageInput.on("change",function(){fnInsertImages(this.files);$(this).val("");$imageDialog.modal("hide")});$imageUrl.val("").keyup(function(){toggleBtn($imageBtn,$imageUrl.val())}).trigger("focus");$imageBtn.click(function(event){$imageDialog.modal("hide");fnInsertImage($imageUrl.val());event.preventDefault()})}).on("hidden.bs.modal",
function(){$imageInput.off("change");$imageDialog.off("shown.bs.modal hidden.bs.modal");$imageUrl.off("keyup");$imageBtn.off("click")}).modal("show")};this.showVideoDialog=function($dialog,videoInfo,callback){var $videoDialog=$dialog.find(".note-video-dialog");var $videoUrl=$videoDialog.find(".note-video-url");var $videoBtn=$videoDialog.find(".note-video-btn");$videoDialog.on("shown.bs.modal",function(){$videoUrl.val(videoInfo.text).keyup(function(){toggleBtn($videoBtn,$videoUrl.val())}).trigger("keyup").trigger("focus");
$videoBtn.click(function(event){$videoDialog.modal("hide");callback($videoUrl.val());event.preventDefault()})}).on("hidden.bs.modal",function(){$videoUrl.off("keyup");$videoBtn.off("click");$videoDialog.off("show.bs.modal hidden.bs.modal")}).modal("show")};this.showLinkDialog=function($dialog,linkInfo,callback){var $linkDialog=$dialog.find(".note-link-dialog");var $linkText=$linkDialog.find(".note-link-text");var $linkUrl=$linkDialog.find(".note-link-url");var $linkBtn=$linkDialog.find(".note-link-btn");
$linkDialog.on("shown.bs.modal",function(){$linkText.html(linkInfo.text);$linkUrl.val(linkInfo.url).keyup(function(){toggleBtn($linkBtn,$linkUrl.val());if(!linkInfo.text)$linkText.html($linkUrl.val())}).trigger("focus");$linkBtn.click(function(event){$linkDialog.modal("hide");callback($linkUrl.val());event.preventDefault()})}).on("hidden.bs.modal",function(){$linkUrl.off("keyup");$linkBtn.off("click");$linkDialog.off("shown.bs.modal hidden.bs.modal")}).modal("show")};this.showHelpDialog=function($dialog){$dialog.find(".note-help-dialog").modal("show")}};
var EventHandler=function(){var editor=new Editor;var toolbar=new Toolbar;var popover=new Popover;var handle=new Handle;var dialog=new Dialog;var key={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLACH:220,RIGHTBRACKET:221};var makeLayoutInfo=function(descendant){var $editor=$(descendant).closest(".note-editor");return{editor:function(){return $editor},toolbar:function(){return $editor.find(".note-toolbar")},
editable:function(){return $editor.find(".note-editable")},codable:function(){return $editor.find(".note-codable")},statusbar:function(){return $editor.find(".note-statusbar")},popover:function(){return $editor.find(".note-popover")},handle:function(){return $editor.find(".note-handle")},dialog:function(){return $editor.find(".note-dialog")}}};var hKeydown=function(event){var bCmd=agent.bMac?event.metaKey:event.ctrlKey;var bShift=event.shiftKey;var keyCode=event.keyCode;var bExecCmd=bCmd||bShift||
keyCode===key.TAB;var oLayoutInfo=bExecCmd?makeLayoutInfo(event.target):null;if(keyCode===key.TAB&&oLayoutInfo.editable().data("tabsize"))editor.tab(oLayoutInfo.editable());else if(bCmd&&(bShift&&keyCode===key.Z||keyCode===key.Y))editor.redo(oLayoutInfo.editable());else if(bCmd&&keyCode===key.Z)editor.undo(oLayoutInfo.editable());else if(bCmd&&keyCode===key.B)editor.bold(oLayoutInfo.editable());else if(bCmd&&keyCode===key.I)editor.italic(oLayoutInfo.editable());else if(bCmd&&keyCode===key.U)editor.underline(oLayoutInfo.editable());
else if(bCmd&&bShift&&keyCode===key.S)editor.strikethrough(oLayoutInfo.editable());else if(bCmd&&keyCode===key.BACKSLACH)editor.removeFormat(oLayoutInfo.editable());else if(bCmd&&keyCode===key.K){oLayoutInfo.editable();editor.setLinkDialog(oLayoutInfo.editable(),function(linkInfo,cb){dialog.showLinkDialog(oLayoutInfo.dialog(),linkInfo,cb)})}else if(bCmd&&keyCode===key.SLASH)dialog.showHelpDialog(oLayoutInfo.dialog());else if(bCmd&&bShift&&keyCode===key.L)editor.justifyLeft(oLayoutInfo.editable());
else if(bCmd&&bShift&&keyCode===key.E)editor.justifyCenter(oLayoutInfo.editable());else if(bCmd&&bShift&&keyCode===key.R)editor.justifyRight(oLayoutInfo.editable());else if(bCmd&&bShift&&keyCode===key.J)editor.justifyFull(oLayoutInfo.editable());else if(bCmd&&bShift&&keyCode===key.NUM7)editor.insertUnorderedList(oLayoutInfo.editable());else if(bCmd&&bShift&&keyCode===key.NUM8)editor.insertOrderedList(oLayoutInfo.editable());else if(bCmd&&keyCode===key.LEFTBRACKET)editor.outdent(oLayoutInfo.editable());
else if(bCmd&&keyCode===key.RIGHTBRACKET)editor.indent(oLayoutInfo.editable());else if(bCmd&&keyCode===key.NUM0)editor.formatBlock(oLayoutInfo.editable(),"P");else if(bCmd&&key.NUM1<=keyCode&&keyCode<=key.NUM6){var sHeading="H"+String.fromCharCode(keyCode);editor.formatBlock(oLayoutInfo.editable(),sHeading)}else if(bCmd&&keyCode===key.ENTER)editor.insertHorizontalRule(oLayoutInfo.editable());else{if(keyCode===key.BACKSPACE||keyCode===key.ENTER||keyCode===key.SPACE)editor.recordUndo(makeLayoutInfo(event.target).editable());
return}event.preventDefault()};var insertImages=function($editable,files){var callbacks=$editable.data("callbacks");editor.restoreRange($editable);if(callbacks.onImageUpload)callbacks.onImageUpload(files,editor,$editable);else $.each(files,function(idx,file){async.readFile(file).done(function(sURL){editor.insertImage($editable,sURL)}).fail(function(){if(callbacks.onImageUploadError)callbacks.onImageUploadError()})})};var hDropImage=function(event){var dataTransfer=event.originalEvent.dataTransfer;
if(dataTransfer&&dataTransfer.files){var oLayoutInfo=makeLayoutInfo(event.currentTarget||event.target);oLayoutInfo.editable().focus();insertImages(oLayoutInfo.editable(),dataTransfer.files)}event.preventDefault()};var hMousedown=function(event){if(dom.isImg(event.target))event.preventDefault()};var hToolbarAndPopoverUpdate=function(event){var oLayoutInfo=makeLayoutInfo(event.currentTarget||event.target);var oStyle=editor.currentStyle(event.target);if(!oStyle)return;toolbar.update(oLayoutInfo.toolbar(),
oStyle);popover.update(oLayoutInfo.popover(),oStyle);handle.update(oLayoutInfo.handle(),oStyle)};var hScroll=function(event){var oLayoutInfo=makeLayoutInfo(event.currentTarget||event.target);popover.hide(oLayoutInfo.popover());handle.hide(oLayoutInfo.handle())};var hHandleMousedown=function(event$$0){if(dom.isControlSizing(event$$0.target)){var oLayoutInfo=makeLayoutInfo(event$$0.target);var $handle=oLayoutInfo.handle();var $popover=oLayoutInfo.popover();var $editable=oLayoutInfo.editable();var $editor=
oLayoutInfo.editor();var elTarget=$handle.find(".note-control-selection").data("target");var $target=$(elTarget);var posStart=$target.offset();var scrollTop=$(document).scrollTop();var posDistance;$editor.on("mousemove",function(event){posDistance={x:event.clientX-posStart.left,y:event.clientY-(posStart.top-scrollTop)};editor.resizeTo(posDistance,$target);handle.update($handle,{image:elTarget});popover.update($popover,{image:elTarget})}).on("mouseup",function(){$editor.off("mousemove").off("mouseup")});
if(!$target.data("ratio"))$target.data("ratio",$target.height()/$target.width());editor.recordUndo($editable);event$$0.stopPropagation();event$$0.preventDefault()}};var hToolbarAndPopoverMousedown=function(event){var $btn=$(event.target).closest("[data-event]");if($btn.length>0)event.preventDefault()};var hToolbarAndPopoverClick=function(event){var $btn=$(event.target).closest("[data-event]");if($btn.length>0){var sEvent=$btn.attr("data-event");var sValue=$btn.attr("data-value");var oLayoutInfo=makeLayoutInfo(event.target);
var $editor=oLayoutInfo.editor();var $toolbar=oLayoutInfo.toolbar();var $dialog=oLayoutInfo.dialog();var $editable=oLayoutInfo.editable();var $codable=oLayoutInfo.codable();var elTarget;if($.inArray(sEvent,["resize","floatMe"])!==-1){var $handle=oLayoutInfo.handle();var $selection=$handle.find(".note-control-selection");elTarget=$selection.data("target")}if(editor[sEvent]){$editable.trigger("focus");editor[sEvent]($editable,sValue,elTarget)}if($.inArray(sEvent,["backColor","foreColor"])!==-1)toolbar.updateRecentColor($btn[0],
sEvent,sValue);else if(sEvent==="showLinkDialog"){$editable.focus();editor.setLinkDialog($editable,function(linkInfo,cb){dialog.showLinkDialog($dialog,linkInfo,cb)})}else if(sEvent==="showImageDialog"){$editable.focus();dialog.showImageDialog($dialog,function(files){insertImages($editable,files)},function(sUrl){editor.restoreRange($editable);editor.insertImage($editable,sUrl)})}else if(sEvent==="showVideoDialog"){$editable.focus();editor.setVideoDialog($editable,function(linkInfo,cb){dialog.showVideoDialog($dialog,
linkInfo,cb)})}else if(sEvent==="showHelpDialog")dialog.showHelpDialog($dialog);else if(sEvent==="fullscreen"){$editor.toggleClass("fullscreen");var hResizeFullscreen=function(){var nHeight=$(window).height()-$toolbar.outerHeight();$editable.css("height",nHeight)};var bFullscreen=$editor.hasClass("fullscreen");if(bFullscreen){$editable.data("orgHeight",$editable.css("height"));$(window).resize(hResizeFullscreen).trigger("resize")}else{var hasOptionHeight=!!$editable.data("optionHeight");$editable.css("height",
hasOptionHeight?$editable.data("orgHeight"):"auto");$(window).off("resize")}toolbar.updateFullscreen($toolbar,bFullscreen)}else if(sEvent==="codeview"){$editor.toggleClass("codeview");var bCodeview=$editor.hasClass("codeview");if(bCodeview){$codable.val($editable.html());$codable.height($editable.height());toolbar.disable($toolbar);$codable.focus();if(agent.bCodeMirror){var cmEditor=CodeMirror.fromTextArea($codable[0],$.extend({mode:"text/html",lineNumbers:true},$editor.data("options").codemirror));
cmEditor.setSize(null,$editable.outerHeight());if(cmEditor.autoFormatRange)cmEditor.autoFormatRange({line:0,ch:0},{line:cmEditor.lineCount(),ch:cmEditor.getTextArea().value.length});$codable.data("cmEditor",cmEditor)}}else{if(agent.bCodeMirror)$codable.data("cmEditor").toTextArea();$editable.html($codable.val()||dom.emptyPara);$editable.height($editable.data("optionHeight")?$codable.height():"auto");toolbar.enable($toolbar);$editable.focus()}toolbar.updateCodeview(oLayoutInfo.toolbar(),bCodeview)}hToolbarAndPopoverUpdate(event)}};
var EDITABLE_PADDING=24;var hStatusbarMousedown=function(event$$0){var $document=$(document);var oLayoutInfo=makeLayoutInfo(event$$0.target);var $editable=oLayoutInfo.editable();var nEditableTop=$editable.offset().top-$document.scrollTop();var hMousemove=function(event){$editable.height(event.clientY-(nEditableTop+EDITABLE_PADDING))};var hMouseup=function(){$document.unbind("mousemove",hMousemove).unbind("mouseup",hMouseup)};$document.mousemove(hMousemove).mouseup(hMouseup);event$$0.stopPropagation();
event$$0.preventDefault()};var PX_PER_EM=18;var hDimensionPickerMove=function(event){var $picker=$(event.target.parentNode);var $dimensionDisplay=$picker.next();var $catcher=$picker.find(".note-dimension-picker-mousecatcher");var $highlighted=$picker.find(".note-dimension-picker-highlighted");var $unhighlighted=$picker.find(".note-dimension-picker-unhighlighted");var posOffset;if(event.offsetX===undefined){var posCatcher=$(event.target).offset();posOffset={x:event.pageX-posCatcher.left,y:event.pageY-
posCatcher.top}}else posOffset={x:event.offsetX,y:event.offsetY};var dim={c:Math.ceil(posOffset.x/PX_PER_EM)||1,r:Math.ceil(posOffset.y/PX_PER_EM)||1};$highlighted.css({width:dim.c+"em",height:dim.r+"em"});$catcher.attr("data-value",dim.c+"x"+dim.r);if(3<dim.c&&dim.c<10)$unhighlighted.css({width:dim.c+1+"em"});if(3<dim.r&&dim.r<10)$unhighlighted.css({height:dim.r+1+"em"});$dimensionDisplay.html(dim.c+" x "+dim.r)};var attachDragAndDropEvent=function(oLayoutInfo){var collection=$();var $dropzone=oLayoutInfo.dropzone;
var $dropzoneMessage=oLayoutInfo.dropzone.find(".note-dropzone-message");$(document).on("dragenter",function(e){var bCodeview=oLayoutInfo.editor.hasClass("codeview");if(!bCodeview&&collection.length===0){oLayoutInfo.editor.addClass("dragover");$dropzone.width(oLayoutInfo.editor.width());$dropzone.height(oLayoutInfo.editor.height());$dropzoneMessage.text("Drag Image Here")}collection=collection.add(e.target)}).on("dragleave",function(e){collection=collection.not(e.target);if(collection.length===0)oLayoutInfo.editor.removeClass("dragover")}).on("drop",
function(){collection=$();oLayoutInfo.editor.removeClass("dragover")});$dropzone.on("dragenter",function(){$dropzone.addClass("hover");$dropzoneMessage.text("Drop Image")}).on("dragleave",function(){$dropzone.removeClass("hover");$dropzoneMessage.text("Drag Image Here")});$dropzone.on("drop",function(e){hDropImage(e)}).on("dragover",false)};this.attach=function(oLayoutInfo,options){oLayoutInfo.editable.on("keydown",hKeydown);oLayoutInfo.editable.on("mousedown",hMousedown);oLayoutInfo.editable.on("keyup mouseup",
hToolbarAndPopoverUpdate);oLayoutInfo.editable.on("scroll",hScroll);attachDragAndDropEvent(oLayoutInfo);oLayoutInfo.handle.on("mousedown",hHandleMousedown);oLayoutInfo.toolbar.on("click",hToolbarAndPopoverClick);oLayoutInfo.popover.on("click",hToolbarAndPopoverClick);oLayoutInfo.toolbar.on("mousedown",hToolbarAndPopoverMousedown);oLayoutInfo.popover.on("mousedown",hToolbarAndPopoverMousedown);oLayoutInfo.statusbar.on("mousedown",hStatusbarMousedown);var $toolbar=oLayoutInfo.toolbar;var $catcher=$toolbar.find(".note-dimension-picker-mousecatcher");
$catcher.on("mousemove",hDimensionPickerMove);oLayoutInfo.editable.on("blur",function(){editor.saveRange(oLayoutInfo.editable)});if(options.onenter)oLayoutInfo.editable.keypress(function(event){if(event.keyCode===key.ENTER)options.onenter(event)});if(options.onfocus)oLayoutInfo.editable.focus(options.onfocus);if(options.onblur)oLayoutInfo.editable.blur(options.onblur);if(options.onkeyup)oLayoutInfo.editable.keyup(options.onkeyup);if(options.onkeydown)oLayoutInfo.editable.keydown(options.onkeydown);
oLayoutInfo.editable.data("callbacks",{onChange:options.onChange,onAutoSave:options.onAutoSave,onPasteBefore:options.onPasteBefore,onPasteAfter:options.onPasteAfter,onImageUpload:options.onImageUpload,onImageUploadError:options.onImageUpload,onFileUpload:options.onFileUpload,onFileUploadError:options.onFileUpload})};this.dettach=function(oLayoutInfo){oLayoutInfo.editable.off();oLayoutInfo.toolbar.off();oLayoutInfo.handle.off();oLayoutInfo.popover.off()}};var Renderer=function(){var tplToolbarInfo;
var tplPopover;var tplhandle;var tplDialog;var tplStatusbar;tplToolbarInfo={samples:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.font.bold+'" data-shortcut\x3d"Ctrl+S" data-mac-shortcut\x3d"\u2318+S"  data-toggle\x3d"modal" data-target\x3d"#samplesModal" tabindex\x3d"-1"\x3eSamples\x3c/button\x3e'},picture:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.image.image+'" data-event\x3d"showImageDialog" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-picture-o icon-picture"\x3e\x3c/i\x3e\x3c/button\x3e'},
link:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.link.link+'" data-event\x3d"showLinkDialog" data-shortcut\x3d"Ctrl+K" data-mac-shortcut\x3d"\u2318+K" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-link icon-link"\x3e\x3c/i\x3e\x3c/button\x3e'},video:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.video.video+'" data-event\x3d"showVideoDialog" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-youtube-play icon-play"\x3e\x3c/i\x3e\x3c/button\x3e'},
table:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small dropdown-toggle" title\x3d"'+lang.table.table+'" data-toggle\x3d"dropdown" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-table icon-table"\x3e\x3c/i\x3e \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\x3c/button\x3e'+'\x3cul class\x3d"dropdown-menu"\x3e'+'\x3cdiv class\x3d"note-dimension-picker"\x3e'+'\x3cdiv class\x3d"note-dimension-picker-mousecatcher" data-event\x3d"insertTable" data-value\x3d"1x1"\x3e\x3c/div\x3e'+
'\x3cdiv class\x3d"note-dimension-picker-highlighted"\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"note-dimension-picker-unhighlighted"\x3e\x3c/div\x3e'+"\x3c/div\x3e"+'\x3cdiv class\x3d"note-dimension-display"\x3e 1 x 1 \x3c/div\x3e'+"\x3c/ul\x3e"},style:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small dropdown-toggle" title\x3d"'+lang.style.style+'" data-toggle\x3d"dropdown" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-magic icon-magic"\x3e\x3c/i\x3e \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\x3c/button\x3e'+
'\x3cul class\x3d"dropdown-menu"\x3e'+'\x3cli\x3e\x3ca data-event\x3d"formatBlock" data-value\x3d"p"\x3e'+lang.style.normal+"\x3c/a\x3e\x3c/li\x3e"+'\x3cli\x3e\x3ca data-event\x3d"formatBlock" data-value\x3d"blockquote"\x3e\x3cblockquote\x3e'+lang.style.blockquote+"\x3c/blockquote\x3e\x3c/a\x3e\x3c/li\x3e"+'\x3cli\x3e\x3ca data-event\x3d"formatBlock" data-value\x3d"pre"\x3e'+lang.style.pre+"\x3c/a\x3e\x3c/li\x3e"+'\x3cli\x3e\x3ca data-event\x3d"formatBlock" data-value\x3d"h1"\x3e\x3ch1\x3e'+lang.style.h1+
"\x3c/h1\x3e\x3c/a\x3e\x3c/li\x3e"+'\x3cli\x3e\x3ca data-event\x3d"formatBlock" data-value\x3d"h2"\x3e\x3ch2\x3e'+lang.style.h2+"\x3c/h2\x3e\x3c/a\x3e\x3c/li\x3e"+'\x3cli\x3e\x3ca data-event\x3d"formatBlock" data-value\x3d"h3"\x3e\x3ch3\x3e'+lang.style.h3+"\x3c/h3\x3e\x3c/a\x3e\x3c/li\x3e"+'\x3cli\x3e\x3ca data-event\x3d"formatBlock" data-value\x3d"h4"\x3e\x3ch4\x3e'+lang.style.h4+"\x3c/h4\x3e\x3c/a\x3e\x3c/li\x3e"+'\x3cli\x3e\x3ca data-event\x3d"formatBlock" data-value\x3d"h5"\x3e\x3ch5\x3e'+lang.style.h5+
"\x3c/h5\x3e\x3c/a\x3e\x3c/li\x3e"+'\x3cli\x3e\x3ca data-event\x3d"formatBlock" data-value\x3d"h6"\x3e\x3ch6\x3e'+lang.style.h6+"\x3c/h6\x3e\x3c/a\x3e\x3c/li\x3e"+"\x3c/ul\x3e"},fontsize:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small dropdown-toggle" data-toggle\x3d"dropdown" title\x3d"'+lang.font.size+'" tabindex\x3d"-1"\x3e\x3cspan class\x3d"note-current-fontsize"\x3e11\x3c/span\x3e \x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/button\x3e'+'\x3cul class\x3d"dropdown-menu"\x3e'+
'\x3cli\x3e\x3ca data-event\x3d"fontSize" data-value\x3d"8"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 8\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"fontSize" data-value\x3d"9"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 9\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"fontSize" data-value\x3d"10"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 10\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"fontSize" data-value\x3d"11"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 11\x3c/a\x3e\x3c/li\x3e'+
'\x3cli\x3e\x3ca data-event\x3d"fontSize" data-value\x3d"12"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 12\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"fontSize" data-value\x3d"14"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 14\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"fontSize" data-value\x3d"18"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 18\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"fontSize" data-value\x3d"24"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 24\x3c/a\x3e\x3c/li\x3e'+
'\x3cli\x3e\x3ca data-event\x3d"fontSize" data-value\x3d"36"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 36\x3c/a\x3e\x3c/li\x3e'+"\x3c/ul\x3e"},color:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small note-recent-color" title\x3d"'+lang.color.recent+'" data-event\x3d"color" data-value\x3d\'{"backColor":"yellow"}\' tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-font icon-font" style\x3d"color:black;background-color:yellow;"\x3e\x3c/i\x3e\x3c/button\x3e'+
'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small dropdown-toggle" title\x3d"'+lang.color.more+'" data-toggle\x3d"dropdown" tabindex\x3d"-1"\x3e'+'\x3cspan class\x3d"caret"\x3e\x3c/span\x3e'+"\x3c/button\x3e"+'\x3cul class\x3d"dropdown-menu"\x3e'+"\x3cli\x3e"+'\x3cdiv class\x3d"btn-group"\x3e'+'\x3cdiv class\x3d"note-palette-title"\x3e'+lang.color.background+"\x3c/div\x3e"+'\x3cdiv class\x3d"note-color-reset" data-event\x3d"backColor" data-value\x3d"inherit" title\x3d"'+lang.color.transparent+
'"\x3e'+lang.color.setTransparent+"\x3c/div\x3e"+'\x3cdiv class\x3d"note-color-palette" data-target-event\x3d"backColor"\x3e\x3c/div\x3e'+"\x3c/div\x3e"+'\x3cdiv class\x3d"btn-group"\x3e'+'\x3cdiv class\x3d"note-palette-title"\x3e'+lang.color.foreground+"\x3c/div\x3e"+'\x3cdiv class\x3d"note-color-reset" data-event\x3d"foreColor" data-value\x3d"inherit" title\x3d"'+lang.color.reset+'"\x3e'+lang.color.resetToDefault+"\x3c/div\x3e"+'\x3cdiv class\x3d"note-color-palette" data-target-event\x3d"foreColor"\x3e\x3c/div\x3e'+
"\x3c/div\x3e"+"\x3c/li\x3e"+"\x3c/ul\x3e"},bold:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.font.bold+'" data-shortcut\x3d"Ctrl+B" data-mac-shortcut\x3d"\u2318+B" data-event\x3d"bold" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-bold icon-bold"\x3e\x3c/i\x3e\x3c/button\x3e'},italic:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.font.italic+'" data-shortcut\x3d"Ctrl+I" data-mac-shortcut\x3d"\u2318+I" data-event\x3d"italic" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-italic icon-italic"\x3e\x3c/i\x3e\x3c/button\x3e'},
underline:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.font.underline+'" data-shortcut\x3d"Ctrl+U" data-mac-shortcut\x3d"\u2318+U" data-event\x3d"underline" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-underline icon-underline"\x3e\x3c/i\x3e\x3c/button\x3e'},clear:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.font.clear+'" data-shortcut\x3d"Ctrl+\\" data-mac-shortcut\x3d"\u2318+\\" data-event\x3d"removeFormat" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-eraser icon-eraser"\x3e\x3c/i\x3e\x3c/button\x3e'},
ul:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.lists.unordered+'" data-shortcut\x3d"Ctrl+Shift+8" data-mac-shortcut\x3d"\u2318+\u21e7+7" data-event\x3d"insertUnorderedList" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-list-ul icon-list-ul"\x3e\x3c/i\x3e\x3c/button\x3e'},ol:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.lists.ordered+'" data-shortcut\x3d"Ctrl+Shift+7" data-mac-shortcut\x3d"\u2318+\u21e7+8" data-event\x3d"insertOrderedList" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-list-ol icon-list-ol"\x3e\x3c/i\x3e\x3c/button\x3e'},
paragraph:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small dropdown-toggle" title\x3d"'+lang.paragraph.paragraph+'" data-toggle\x3d"dropdown" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-align-left icon-align-left"\x3e\x3c/i\x3e  \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\x3c/button\x3e'+'\x3cul class\x3d"dropdown-menu"\x3e'+"\x3cli\x3e"+'\x3cdiv class\x3d"note-align btn-group"\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+
lang.paragraph.left+'" data-shortcut\x3d"Ctrl+Shift+L" data-mac-shortcut\x3d"\u2318+\u21e7+L" data-event\x3d"justifyLeft" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-align-left icon-align-left"\x3e\x3c/i\x3e\x3c/button\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.paragraph.center+'" data-shortcut\x3d"Ctrl+Shift+E" data-mac-shortcut\x3d"\u2318+\u21e7+E" data-event\x3d"justifyCenter" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-align-center icon-align-center"\x3e\x3c/i\x3e\x3c/button\x3e'+
'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.paragraph.right+'" data-shortcut\x3d"Ctrl+Shift+R" data-mac-shortcut\x3d"\u2318+\u21e7+R" data-event\x3d"justifyRight" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-align-right icon-align-right"\x3e\x3c/i\x3e\x3c/button\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.paragraph.justify+'" data-shortcut\x3d"Ctrl+Shift+J" data-mac-shortcut\x3d"\u2318+\u21e7+J" data-event\x3d"justifyFull" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-align-justify icon-align-justify"\x3e\x3c/i\x3e\x3c/button\x3e'+
"\x3c/div\x3e"+"\x3c/li\x3e"+"\x3cli\x3e"+'\x3cdiv class\x3d"note-list btn-group"\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.paragraph.outdent+'" data-shortcut\x3d"Ctrl+[" data-mac-shortcut\x3d"\u2318+[" data-event\x3d"outdent" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-outdent icon-indent-left"\x3e\x3c/i\x3e\x3c/button\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.paragraph.indent+'" data-shortcut\x3d"Ctrl+]" data-mac-shortcut\x3d"\u2318+]" data-event\x3d"indent" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-indent icon-indent-right"\x3e\x3c/i\x3e\x3c/button\x3e'+
"\x3c/li\x3e"+"\x3c/ul\x3e"},height:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small dropdown-toggle" data-toggle\x3d"dropdown" title\x3d"'+lang.font.height+'" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-text-height icon-text-height"\x3e\x3c/i\x3e\x26nbsp; \x3cb class\x3d"caret"\x3e\x3c/b\x3e\x3c/button\x3e'+'\x3cul class\x3d"dropdown-menu"\x3e'+'\x3cli\x3e\x3ca data-event\x3d"lineHeight" data-value\x3d"1.0"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 1.0\x3c/a\x3e\x3c/li\x3e'+
'\x3cli\x3e\x3ca data-event\x3d"lineHeight" data-value\x3d"1.2"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 1.2\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"lineHeight" data-value\x3d"1.4"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 1.4\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"lineHeight" data-value\x3d"1.5"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 1.5\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"lineHeight" data-value\x3d"1.6"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 1.6\x3c/a\x3e\x3c/li\x3e'+
'\x3cli\x3e\x3ca data-event\x3d"lineHeight" data-value\x3d"1.8"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 1.8\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"lineHeight" data-value\x3d"2.0"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 2.0\x3c/a\x3e\x3c/li\x3e'+'\x3cli\x3e\x3ca data-event\x3d"lineHeight" data-value\x3d"3.0"\x3e\x3ci class\x3d"fa fa-check icon-ok"\x3e\x3c/i\x3e 3.0\x3c/a\x3e\x3c/li\x3e'+"\x3c/ul\x3e"},help:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+
lang.options.help+'" data-shortcut\x3d"Ctrl+/" data-mac-shortcut\x3d"\u2318+/" data-event\x3d"showHelpDialog" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-question icon-question"\x3e\x3c/i\x3e\x3c/button\x3e'},fullscreen:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.options.fullscreen+'" data-event\x3d"fullscreen" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-arrows-alt icon-fullscreen"\x3e\x3c/i\x3e\x3c/button\x3e'},codeview:function(lang){return'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+
lang.options.codeview+'" data-event\x3d"codeview" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-code icon-code"\x3e\x3c/i\x3e\x3c/button\x3e'}};tplPopover=function(lang){return'\x3cdiv class\x3d"note-popover"\x3e'+'\x3cdiv class\x3d"note-link-popover popover bottom in" style\x3d"display: none;"\x3e'+'\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"popover-content note-link-content"\x3e'+'\x3ca href\x3d"http://www.google.com" target\x3d"_blank"\x3ewww.google.com\x3c/a\x3e\x26nbsp;\x26nbsp;'+
'\x3cdiv class\x3d"note-insert btn-group"\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.link.edit+'" data-event\x3d"showLinkDialog" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-edit icon-edit"\x3e\x3c/i\x3e\x3c/button\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.link.unlink+'" data-event\x3d"unlink" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-unlink icon-unlink"\x3e\x3c/i\x3e\x3c/button\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+
lang.video.videoLink+'" data-event\x3d"showVideoDialog" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-youtube-play icon-play"\x3e\x3c/i\x3e\x3c/button\x3e'+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"note-image-popover popover bottom in" style\x3d"display: none;"\x3e'+'\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"popover-content note-image-content"\x3e'+'\x3cdiv class\x3d"btn-group"\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+
lang.image.resizeFull+'" data-event\x3d"resize" data-value\x3d"1" tabindex\x3d"-1"\x3e\x3cspan class\x3d"note-fontsize-10"\x3e100%\x3c/span\x3e \x3c/button\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.image.resizeHalf+'" data-event\x3d"resize" data-value\x3d"0.5" tabindex\x3d"-1"\x3e\x3cspan class\x3d"note-fontsize-10"\x3e50%\x3c/span\x3e \x3c/button\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.image.resizeQuarter+
'" data-event\x3d"resize" data-value\x3d"0.25" tabindex\x3d"-1"\x3e\x3cspan class\x3d"note-fontsize-10"\x3e25%\x3c/span\x3e \x3c/button\x3e'+"\x3c/div\x3e"+'\x3cdiv class\x3d"btn-group"\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.image.floatLeft+'" data-event\x3d"floatMe" data-value\x3d"left" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-align-left icon-align-left"\x3e\x3c/i\x3e\x3c/button\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+
lang.image.floatRight+'" data-event\x3d"floatMe" data-value\x3d"right" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-align-right icon-align-right"\x3e\x3c/i\x3e\x3c/button\x3e'+'\x3cbutton type\x3d"button" class\x3d"btn btn-default btn-sm btn-small" title\x3d"'+lang.image.floatNone+'" data-event\x3d"floatMe" data-value\x3d"none" tabindex\x3d"-1"\x3e\x3ci class\x3d"fa fa-align-justify icon-align-justify"\x3e\x3c/i\x3e\x3c/button\x3e'+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"};tplhandle=
'\x3cdiv class\x3d"note-handle"\x3e'+'\x3cdiv class\x3d"note-control-selection"\x3e'+'\x3cdiv class\x3d"note-control-selection-bg"\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"note-control-holder note-control-nw"\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"note-control-holder note-control-ne"\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"note-control-holder note-control-sw"\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"note-control-sizing note-control-se"\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"note-control-selection-info"\x3e\x3c/div\x3e'+
"\x3c/div\x3e"+"\x3c/div\x3e";var tplShortcutText=function(lang){return'\x3ctable class\x3d"note-shortcut"\x3e'+"\x3cthead\x3e"+"\x3ctr\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e"+lang.shortcut.textFormatting+"\x3c/th\x3e\x3c/tr\x3e"+"\x3c/thead\x3e"+"\x3ctbody\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + B\x3c/td\x3e\x3ctd\x3e"+lang.font.bold+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + I\x3c/td\x3e\x3ctd\x3e"+lang.font.italic+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + U\x3c/td\x3e\x3ctd\x3e"+
lang.font.underline+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + \u21e7 + S\x3c/td\x3e\x3ctd\x3e"+lang.font.strike+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + \\\x3c/td\x3e\x3ctd\x3e"+lang.font.clear+"\x3c/td\x3e\x3c/tr\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"};var tplShortcutAction=function(lang){return'\x3ctable class\x3d"note-shortcut"\x3e'+"\x3cthead\x3e"+"\x3ctr\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e"+lang.shortcut.action+"\x3c/th\x3e\x3c/tr\x3e"+"\x3c/thead\x3e"+
"\x3ctbody\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + Z\x3c/td\x3e\x3ctd\x3e"+lang.history.undo+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + \u21e7 + Z\x3c/td\x3e\x3ctd\x3e"+lang.history.redo+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + ]\x3c/td\x3e\x3ctd\x3e"+lang.paragraph.indent+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + [\x3c/td\x3e\x3ctd\x3e"+lang.paragraph.outdent+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + K\x3c/td\x3e\x3ctd\x3e"+lang.link.insert+"\x3c/td\x3e\x3c/tr\x3e"+
"\x3ctr\x3e\x3ctd\x3e\u2318 + ENTER\x3c/td\x3e\x3ctd\x3e"+lang.hr.insert+"\x3c/td\x3e\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"};var tplShortcutPara=function(lang){return'\x3ctable class\x3d"note-shortcut"\x3e'+"\x3cthead\x3e"+"\x3ctr\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e"+lang.shortcut.paragraphFormatting+"\x3c/th\x3e\x3c/tr\x3e"+"\x3c/thead\x3e"+"\x3ctbody\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + \u21e7 + L\x3c/td\x3e\x3ctd\x3e"+lang.paragraph.left+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + \u21e7 + E\x3c/td\x3e\x3ctd\x3e"+
lang.paragraph.center+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + \u21e7 + R\x3c/td\x3e\x3ctd\x3e"+lang.paragraph.right+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + \u21e7 + J\x3c/td\x3e\x3ctd\x3e"+lang.paragraph.justify+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + \u21e7 + NUM7\x3c/td\x3e\x3ctd\x3e"+lang.lists.ordered+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + \u21e7 + NUM8\x3c/td\x3e\x3ctd\x3e"+lang.lists.unordered+"\x3c/td\x3e\x3c/tr\x3e"+"\x3c/tbody\x3e"+
"\x3c/table\x3e"};var tplShortcutStyle=function(lang){return'\x3ctable class\x3d"note-shortcut"\x3e'+"\x3cthead\x3e"+"\x3ctr\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e"+lang.shortcut.documentStyle+"\x3c/th\x3e\x3c/tr\x3e"+"\x3c/thead\x3e"+"\x3ctbody\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + NUM0\x3c/td\x3e\x3ctd\x3e"+lang.style.normal+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + NUM1\x3c/td\x3e\x3ctd\x3e"+lang.style.h1+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + NUM2\x3c/td\x3e\x3ctd\x3e"+lang.style.h2+
"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + NUM3\x3c/td\x3e\x3ctd\x3e"+lang.style.h3+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + NUM4\x3c/td\x3e\x3ctd\x3e"+lang.style.h4+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + NUM5\x3c/td\x3e\x3ctd\x3e"+lang.style.h5+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\u2318 + NUM6\x3c/td\x3e\x3ctd\x3e"+lang.style.h6+"\x3c/td\x3e\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"};var tplShortcutTable=function(lang){return'\x3ctable class\x3d"note-shortcut-layout"\x3e'+
"\x3ctbody\x3e"+"\x3ctr\x3e\x3ctd\x3e"+tplShortcutAction(lang)+"\x3c/td\x3e\x3ctd\x3e"+tplShortcutText(lang)+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e"+tplShortcutStyle(lang)+"\x3c/td\x3e\x3ctd\x3e"+tplShortcutPara(lang)+"\x3c/td\x3e\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"};var replaceMacKeys=function(sHtml){return sHtml.replace(/\u2318/g,"Ctrl").replace(/\u21e7/g,"Shift")};tplDialog=function(lang){return'\x3cdiv class\x3d"note-dialog"\x3e'+'\x3cdiv class\x3d"note-image-dialog modal" aria-hidden\x3d"false"\x3e'+
'\x3cdiv class\x3d"modal-dialog"\x3e'+'\x3cdiv class\x3d"modal-content"\x3e'+'\x3cdiv class\x3d"modal-header"\x3e'+'\x3cbutton type\x3d"button" class\x3d"close" aria-hidden\x3d"true" tabindex\x3d"-1"\x3e\u00d7\x3c/button\x3e'+"\x3ch4\x3e"+lang.image.insert+"\x3c/h4\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"modal-body"\x3e'+'\x3cdiv class\x3d"row-fluid"\x3e'+"\x3ch5\x3e"+lang.image.selectFromFiles+"\x3c/h5\x3e"+'\x3cinput class\x3d"note-image-input" type\x3d"file" name\x3d"files" accept\x3d"image/*" /\x3e'+
"\x3ch5\x3e"+lang.image.url+"\x3c/h5\x3e"+'\x3cinput class\x3d"note-image-url form-control span12" type\x3d"text" /\x3e'+"\x3c/div\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"modal-footer"\x3e'+'\x3cbutton href\x3d"#" class\x3d"btn btn-primary note-image-btn disabled" disabled\x3d"disabled"\x3e'+lang.image.insert+"\x3c/button\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"note-link-dialog modal" aria-hidden\x3d"false"\x3e'+'\x3cdiv class\x3d"modal-dialog"\x3e'+'\x3cdiv class\x3d"modal-content"\x3e'+
'\x3cdiv class\x3d"modal-header"\x3e'+'\x3cbutton type\x3d"button" class\x3d"close" aria-hidden\x3d"true" tabindex\x3d"-1"\x3e\u00d7\x3c/button\x3e'+"\x3ch4\x3e"+lang.link.insert+"\x3c/h4\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"modal-body"\x3e'+'\x3cdiv class\x3d"row-fluid"\x3e'+'\x3cdiv class\x3d"form-group"\x3e'+"\x3clabel\x3e"+lang.link.textToDisplay+"\x3c/label\x3e"+'\x3cspan class\x3d"note-link-text form-control input-xlarge uneditable-input" /\x3e'+"\x3c/div\x3e"+'\x3cdiv class\x3d"form-group"\x3e'+
"\x3clabel\x3e"+lang.link.url+"\x3c/label\x3e"+'\x3cinput class\x3d"note-link-url form-control span12" type\x3d"text" /\x3e'+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"modal-footer"\x3e'+'\x3cbutton href\x3d"#" class\x3d"btn btn-primary note-link-btn disabled" disabled\x3d"disabled"\x3e'+lang.link.insert+"\x3c/button\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"note-video-dialog modal" aria-hidden\x3d"false"\x3e'+'\x3cdiv class\x3d"modal-dialog"\x3e'+
'\x3cdiv class\x3d"modal-content"\x3e'+'\x3cdiv class\x3d"modal-header"\x3e'+'\x3cbutton type\x3d"button" class\x3d"close" aria-hidden\x3d"true" tabindex\x3d"-1"\x3e\u00d7\x3c/button\x3e'+"\x3ch4\x3e"+lang.video.insert+"\x3c/h4\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"modal-body"\x3e'+'\x3cdiv class\x3d"row-fluid"\x3e'+'\x3cdiv class\x3d"form-group"\x3e'+"\x3clabel\x3e"+lang.video.url+'\x3c/label\x3e\x26nbsp;\x3csmall class\x3d"text-muted"\x3e'+lang.video.providers+"\x3c/small\x3e"+'\x3cinput class\x3d"note-video-url form-control span12" type\x3d"text" /\x3e'+
"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"modal-footer"\x3e'+'\x3cbutton href\x3d"#" class\x3d"btn btn-primary note-video-btn disabled" disabled\x3d"disabled"\x3e'+lang.video.insert+"\x3c/button\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+'\x3cdiv class\x3d"note-help-dialog modal" aria-hidden\x3d"false"\x3e'+'\x3cdiv class\x3d"modal-dialog"\x3e'+'\x3cdiv class\x3d"modal-content"\x3e'+'\x3cdiv class\x3d"modal-body"\x3e'+'\x3cdiv class\x3d"modal-background"\x3e'+
'\x3ca class\x3d"modal-close pull-right" aria-hidden\x3d"true" tabindex\x3d"-1"\x3e'+lang.shortcut.close+"\x3c/a\x3e"+'\x3cdiv class\x3d"title"\x3e'+lang.shortcut.shortcuts+"\x3c/div\x3e"+(agent.bMac?tplShortcutTable(lang):replaceMacKeys(tplShortcutTable(lang)))+'\x3cp class\x3d"text-center"\x3e\x3ca href\x3d"//hackerwins.github.io/summernote/" target\x3d"_blank"\x3eSummernote 0.5.0\x3c/a\x3e \u00b7 \x3ca href\x3d"//github.com/HackerWins/summernote" target\x3d"_blank"\x3eProject\x3c/a\x3e \u00b7 \x3ca href\x3d"//github.com/HackerWins/summernote/issues" target\x3d"_blank"\x3eIssues\x3c/a\x3e\x3c/p\x3e'+
"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"};tplStatusbar='\x3cdiv class\x3d"note-resizebar"\x3e\x3cdiv class\x3d"note-icon-bar"\x3e\x3c/div\x3e\x3cdiv class\x3d"note-icon-bar"\x3e\x3c/div\x3e\x3cdiv class\x3d"note-icon-bar"\x3e\x3c/div\x3e\x3c/div\x3e';var createTooltip=function($container,sPlacement){$container.find("button").each(function(i$$0,elBtn){var $btn=$(elBtn);var tplShortcut=$btn.attr(agent.bMac?"data-mac-shortcut":"data-shortcut");if(tplShortcut)$btn.attr("title",
function(i,v){return v+" ("+tplShortcut+")"})}).tooltip({container:"body",placement:sPlacement||"top"})};var aaColor=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE",
"#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]];var createPalette=function($container){$container.find(".note-color-palette").each(function(){var $palette=$(this);var sEvent=$palette.attr("data-target-event");var aPaletteContents=[];var row=0;for(var szRow=aaColor.length;row<szRow;row++){var aColor=
aaColor[row];var aButton=[];var col=0;for(var szCol=aColor.length;col<szCol;col++){var sColor=aColor[col];aButton.push(['\x3cbutton type\x3d"button" class\x3d"note-color-btn" style\x3d"background-color:',sColor,';" data-event\x3d"',sEvent,'" data-value\x3d"',sColor,'" title\x3d"',sColor,'" data-toggle\x3d"button" tabindex\x3d"-1"\x3e\x3c/button\x3e'].join(""))}aPaletteContents.push("\x3cdiv\x3e"+aButton.join("")+"\x3c/div\x3e")}$palette.html(aPaletteContents.join(""))})};this.createLayout=function($holder,
options){var nHeight=options.height;var nTabsize=options.tabsize;var aToolbarSetting=options.toolbar;var langInfo=$.summernote.lang[options.lang];if($holder.next().hasClass("note-editor"))return;var $editor=$('\x3cdiv class\x3d"note-editor"\x3e\x3c/div\x3e');$editor.data("options",options);if(nHeight>0)$('\x3cdiv class\x3d"note-statusbar"\x3e'+tplStatusbar+"\x3c/div\x3e").prependTo($editor);var $editable=$('\x3cdiv class\x3d"note-editable" contentEditable\x3d"true"\x3e\x3c/div\x3e').prependTo($editor);
if(nHeight){$editable.height(nHeight);$editable.data("optionHeight",nHeight)}if(nTabsize)$editable.data("tabsize",nTabsize);$editable.html(dom.html($holder)||dom.emptyPara);$editable.data("NoteHistory",new History);$('\x3ctextarea class\x3d"note-codable"\x3e\x3c/textarea\x3e').prependTo($editor);setTimeout(function(){document.execCommand("styleWithCSS",0,true)});var sToolbar="";var idx=0;for(var sz=aToolbarSetting.length;idx<sz;idx++){var group=aToolbarSetting[idx];sToolbar+='\x3cdiv class\x3d"note-'+
group[0]+' btn-group"\x3e';var i=0;for(var szGroup=group[1].length;i<szGroup;i++)sToolbar+=tplToolbarInfo[group[1][i]](langInfo);sToolbar+="\x3c/div\x3e"}sToolbar='\x3cdiv class\x3d"note-toolbar btn-toolbar"\x3e'+sToolbar+"\x3c/div\x3e";var $toolbar=$(sToolbar).prependTo($editor);createPalette($toolbar);createTooltip($toolbar,"bottom");var $popover=$(tplPopover(langInfo)).prependTo($editor);createTooltip($popover);$(tplhandle).prependTo($editor);var $dialog=$(tplDialog(langInfo)).prependTo($editor);
$dialog.find("button.close, a.modal-close").click(function(){$(this).closest(".modal").modal("hide")});$('\x3cdiv class\x3d"note-dropzone"\x3e\x3cdiv class\x3d"note-dropzone-message"\x3e\x3c/div\x3e\x3c/div\x3e').prependTo($editor);$editor.insertAfter($holder);$holder.hide()};var layoutInfoFromHolder=this.layoutInfoFromHolder=function($holder){var $editor=$holder.next();if(!$editor.hasClass("note-editor"))return;return{editor:$editor,dropzone:$editor.find(".note-dropzone"),toolbar:$editor.find(".note-toolbar"),
editable:$editor.find(".note-editable"),codable:$editor.find(".note-codable"),statusbar:$editor.find(".note-statusbar"),popover:$editor.find(".note-popover"),handle:$editor.find(".note-handle"),dialog:$editor.find(".note-dialog")}};this.removeLayout=function($holder){var info=layoutInfoFromHolder($holder);if(!info)return;$holder.html(info.editable.html());info.editor.remove();$holder.show()}};var renderer=new Renderer;var eventHandler=new EventHandler;$.summernote=$.summernote||{};$.extend($.summernote,
{version:"0.5.0",lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strike",clear:"Remove Font Style",height:"Line Height",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",dragImageHere:"Drag an image here",selectFromFiles:"Select from files",url:"Image URL"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",
edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, or DailyMotion)"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",
fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"BackColor",foreground:"FontColor",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",
paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style"},history:{undo:"Undo",redo:"Redo"}}}});$.fn.extend({summernote:function(options){options=$.extend({toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview"]],["help",["help"]]],lang:"en-US"},options);this.each(function(idx,
elHolder){var $holder=$(elHolder);renderer.createLayout($holder,options);var info=renderer.layoutInfoFromHolder($holder);eventHandler.attach(info,options);if(dom.isTextarea($holder[0]))$holder.closest("form").submit(function(){$holder.html($holder.code())})});if(this.first()&&options.focus){var info$$0=renderer.layoutInfoFromHolder(this.first());info$$0.editable.focus()}if(this.length>0&&options.oninit)options.oninit()},code:function(sHTML){if(sHTML===undefined){var $holder=this.first();if($holder.length===
0)return;var info$$0=renderer.layoutInfoFromHolder($holder);if(!!(info$$0&&info$$0.editable)){var bCodeview=info$$0.editor.hasClass("codeview");if(bCodeview&&agent.bCodeMirror)info$$0.codable.data("cmEditor").save();return bCodeview?info$$0.codable.val():info$$0.editable.html()}return $holder.html()}this.each(function(i,elHolder){var info=renderer.layoutInfoFromHolder($(elHolder));if(info&&info.editable)info.editable.html(sHTML)})},destroy:function(){this.each(function(idx,elHolder){var $holder=$(elHolder);
var info=renderer.layoutInfoFromHolder($holder);if(!info||!info.editable)return;eventHandler.dettach(info);renderer.removeLayout($holder)})},summernoteInner:function(){return{dom:dom,list:list,func:func,range:range}}})});